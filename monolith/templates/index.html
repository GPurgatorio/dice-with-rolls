<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta charset="utf-8">
    <title>Story Tellers</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        body {
            background-image: url('static/storytellers.jpg');
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: 100% 100%;
        }
        .cont {
            opacity: 0.9;
        }
    </style>

</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <a class="navbar-brand" href="#">
            Story Tellers
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
            {% if current_user.is_authenticated %}
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" onclick="window.location='{{ read_url }}'">Read Stories</a>
                </li>
                <li class="nav-item">
                    <form action="{{ users_url }}/{{ current_user.id }}" method="GET">
                        <a class="nav-link" href="#" onclick="$(this).parents('form:first').submit()">My Wall</a>
                    </form>
                </li>
                <li class="nav-item">
                    <form action="{{ settings_url }}" method="GET">
                        <a class="nav-link" href="#" onclick="$(this).parents('form:first').submit()">New Story</a>
                    </form>
                </li>
            </ul>
            <form class="form-inline" action={{ logout_url }} method="POST">
                <button class="btn btn-danger my-2 my-sm-0" type="submit">Logout</button>
            </form>
            {% else %}
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="window.location='{{ read_url }}'">Read Stories</a>
                </li>
            </ul>
            <form class="form-inline">
                <button class="btn btn-success mr-2" type="button" onclick="window.location='{{ login_url }}'">Login</button>
                <button class="btn btn-secondary mr-2" type="button" onclick="window.location='{{ register_url }}'">Register</button>
            </form>
            {% endif %}
        </div>
    </nav>

    <div class="container bg-light cont my-3 rounded">
        {% if current_user.is_authenticated %}
        <div class="row">
            <div class="col-xs-12 col-sm-12">
                <h3>Hi {{ current_user.firstname }}. These are your stories: </h3>
            </div>
        </div>
        <div class="row pb-3">
            {% set color = ['bg-info', 'bg-success', 'bg-danger', 'bg-secondary'] %}
            {% set index = 0 %}
            {% for story in stories %}
                {% if index % 2 == 0 %}
                {% set index = index + 1 %}
                <div class="col-xs-12 col-6">
                    <div class="card text-white {{ color|random }} text-center">
                        <div class="card-body">
                            <p class="card-text">{{story.text}}</p>
                        </div>
                        <div class="card-footer">
                            <form action="stories/delete/{{ story.id }}" method="POST">
                                <button class="btn btn-outline-light" type="button">DELETE</button>
                            </form>
                        </div>
                    </div>
                {% else %}
                {% set index = index - 1 %}
                    <div class="card text-white {{ color|random }} text-center">
                        <div class="card-body">
                            <p class="card-text">{{story.text}}</p>
                        </div>
                        <div class="card-footer">
                            <form action="stories/delete/{{ story.id }}" method="POST">
                                <button class="btn btn-outline-light" type="button">DELETE</button>
                            </form>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
            {% if index % 2 == 1 %}
            </div>
            {% endif %}
        </div>
        {% else %}
        <div class="row">
            <div class="col-xs-12 col-sm-12 h-10">
                <h3>Hi Anonymous!</h3>
            </div>
        </div>
        <div class="row mb-5 pb-3">
            <div class="col-xs-12 col-6">
                <p class="text-center">Bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla
                    bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla
                    bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla!</p>
            </div>
            <div class="col-xs-12 col-6">
                <div class="text-center">
                    <img src="static/book.jpeg" alt="Stories">
                </div>
            </div>
        </div>
        {% endif %}
        </div>
</body>
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
</html>